---
title: "Generate Risk Score"
description: "Assess risk of an AI prompt without code context"
api: "POST /api/v1/generate-risk"
---

Generate a risk assessment based on prompt text only. This endpoint analyzes the prompt for data sensitivity and input clarity without requiring code context or dependency information.

## Use Cases

Use this endpoint when you need to:

- Quickly assess prompt safety before execution
- Evaluate prompts that don't involve code changes
- Screen for sensitive data in user inputs
- Validate prompt completeness and clarity

## Authentication

<ParamField header="Authorization" type="string" required>
Bearer token for API authentication. Format: `Bearer YOUR_API_KEY`
</ParamField>

## Request Body

<ParamField body="prompt" type="string" required>
The AI prompt or task description to assess for risk.

Example: `"Deploy the updated payment processing code to production"`
</ParamField>

<ParamField body="weights" type="object">
Optional custom weights for each risk factor. All weights should sum to 1.0.

<Expandable title="Weight Configuration">
  <ParamField body="weights.data_sensitivity" type="number" default="0.2">
  Weight for data sensitivity score (0-1)
  </ParamField>
  
  <ParamField body="weights.input_clarity" type="number" default="0.15">
  Weight for input clarity score (0-1)
  </ParamField>
  
  <ParamField body="weights.blast_radius" type="number" default="0.2">
  Weight for blast radius score (0-1)
  </ParamField>
  
  <ParamField body="weights.context_complexity" type="number" default="0.15">
  Weight for context complexity score (0-1)
  </ParamField>
  
  <ParamField body="weights.legal_ip_risk" type="number" default="0.15">
  Weight for legal/IP risk score (0-1)
  </ParamField>
  
  <ParamField body="weights.model_hallucination" type="number" default="0.15">
  Weight for model hallucination risk score (0-1)
  </ParamField>
</Expandable>
</ParamField>

## Response

<ResponseField name="success" type="boolean" required>
Indicates whether the request was successful
</ResponseField>

<ResponseField name="timestamp" type="string" required>
ISO 8601 formatted timestamp of when the assessment was performed
</ResponseField>

<ResponseField name="overall_score" type="number" required>
Aggregate risk score from 0-100, where higher values indicate greater risk
</ResponseField>

<ResponseField name="overall_risk_level" type="string" required>
Risk classification: `"low"`, `"medium"`, `"high"`, or `"critical"`
</ResponseField>

<ResponseField name="recommendations" type="array" required>
List of actionable recommendations based on identified risks
</ResponseField>

<ResponseField name="scores" type="object" required>
Breakdown of individual risk factor scores

<Expandable title="Risk Factor Scores">
  <ResponseField name="scores.data_sensitivity" type="number">
  Score for data sensitivity (0-100)
  </ResponseField>
  
  <ResponseField name="scores.input_clarity" type="number">
  Score for input clarity (0-100)
  </ResponseField>
  
  <ResponseField name="scores.blast_radius" type="number | null">
  Score for blast radius (0-100). Null when no context provided.
  </ResponseField>
  
  <ResponseField name="scores.context_complexity" type="number | null">
  Score for context complexity (0-100). Null when no context provided.
  </ResponseField>
  
  <ResponseField name="scores.legal_ip_risk" type="number">
  Score for legal/IP risk (0-100)
  </ResponseField>
  
  <ResponseField name="scores.model_hallucination" type="number">
  Score for model hallucination risk (0-100)
  </ResponseField>
</Expandable>
</ResponseField>

<ResponseField name="computations" type="object" required>
Detailed computation results for each risk factor including reasoning and evidence
</ResponseField>

<ResponseField name="weights" type="object" required>
The weights used in the calculation (either provided or default values)
</ResponseField>

<ResponseField name="prompt" type="string" required>
Echo of the original prompt that was assessed
</ResponseField>

<ResponseField name="current_file" type="string | null">
Always null for this endpoint (context not provided)
</ResponseField>

<ResponseField name="repo_full_name" type="string | null">
Always null for this endpoint (context not provided)
</ResponseField>

## Example Request

<RequestExample>
```bash cURL
curl -X POST 'https://api.orcho.ai/api/v1/generate-risk' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "prompt": "Update the database schema to add a new user_email field and migrate existing data",
    "weights": {
      "data_sensitivity": 0.25,
      "input_clarity": 0.15,
      "blast_radius": 0.2,
      "context_complexity": 0.15,
      "legal_ip_risk": 0.1,
      "model_hallucination": 0.15
    }
  }'
```

```python Python
import requests

url = 'https://api.orcho.ai/api/v1/generate-risk'
headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
}

data = {
    'prompt': 'Update the database schema to add a new user_email field and migrate existing data',
    'weights': {
        'data_sensitivity': 0.25,
        'input_clarity': 0.15,
        'blast_radius': 0.2,
        'context_complexity': 0.15,
        'legal_ip_risk': 0.1,
        'model_hallucination': 0.15
    }
}

response = requests.post(url, headers=headers, json=data)
result = response.json()
```

```javascript JavaScript
const response = await fetch('https://api.orcho.ai/api/v1/generate-risk', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    prompt: 'Update the database schema to add a new user_email field and migrate existing data',
    weights: {
      data_sensitivity: 0.25,
      input_clarity: 0.15,
      blast_radius: 0.2,
      context_complexity: 0.15,
      legal_ip_risk: 0.1,
      model_hallucination: 0.15
    }
  })
});

const result = await response.json();
```
</RequestExample>

## Example Response

<ResponseExample>
```json Success - Low Risk
{
  "success": true,
  "timestamp": "2025-01-08T15:30:00Z",
  "overall_score": 28.5,
  "overall_risk_level": "medium",
  "recommendations": [
    "Specify which database and table will be modified",
    "Clarify the migration strategy for existing data",
    "Consider adding rollback procedures",
    "Test the migration on a staging environment first"
  ],
  "scores": {
    "data_sensitivity": 35,
    "input_clarity": 42,
    "blast_radius": null,
    "context_complexity": null,
    "legal_ip_risk": 15,
    "model_hallucination": 38
  },
  "computations": {
    "data_sensitivity": {
      "score": 35,
      "reasoning": "Prompt mentions user data (email) which is PII",
      "evidence": ["user_email field", "existing data migration"]
    },
    "input_clarity": {
      "score": 42,
      "reasoning": "Missing key details about database type, table name, and migration approach",
      "evidence": ["No database specified", "No migration strategy", "No rollback plan"]
    }
  },
  "weights": {
    "data_sensitivity": 0.25,
    "input_clarity": 0.15,
    "blast_radius": 0.2,
    "context_complexity": 0.15,
    "legal_ip_risk": 0.1,
    "model_hallucination": 0.15
  },
  "prompt": "Update the database schema to add a new user_email field and migrate existing data",
  "current_file": null,
  "repo_full_name": null
}
```

```json Success - High Risk
{
  "success": true,
  "timestamp": "2025-01-08T15:35:00Z",
  "overall_score": 76.2,
  "overall_risk_level": "high",
  "recommendations": [
    "Remove API keys from the prompt",
    "Use environment variables for sensitive credentials",
    "Specify the exact API endpoint to call",
    "Add error handling requirements",
    "Require human review before execution"
  ],
  "scores": {
    "data_sensitivity": 95,
    "input_clarity": 68,
    "blast_radius": null,
    "context_complexity": null,
    "legal_ip_risk": 45,
    "model_hallucination": 72
  },
  "computations": {
    "data_sensitivity": {
      "score": 95,
      "reasoning": "Prompt contains API key in plain text",
      "evidence": ["sk-1234567890abcdef"]
    }
  },
  "weights": {
    "data_sensitivity": 0.2,
    "input_clarity": 0.15,
    "blast_radius": 0.2,
    "context_complexity": 0.15,
    "legal_ip_risk": 0.15,
    "model_hallucination": 0.15
  },
  "prompt": "Call the payment API using key sk-1234567890abcdef",
  "current_file": null,
  "repo_full_name": null
}
```

```json Error - Bad Request
{
  "success": false,
  "error": "Prompt is required and cannot be empty",
  "error_code": "HTTP_400",
  "details": {
    "status_code": 400
  }
}
```

```json Error - Unauthorized
{
  "success": false,
  "error": "Invalid API key",
  "error_code": "HTTP_401",
  "details": {
    "status_code": 401
  }
}
```
</ResponseExample>

## Best Practices

<AccordionGroup>
<Accordion title="When to use this endpoint">
This endpoint is ideal for quick risk assessments when you don't have code context available. Use it for:

- Screening user-submitted prompts
- Validating prompts before sending to AI models
- Quick safety checks in interactive applications
- Batch processing of prompt libraries

For more accurate assessments involving code changes, use the [Generate Risk with Context](/api-reference/generate-risk-with-context) endpoint instead.
</Accordion>

<Accordion title="Interpreting risk scores">
Risk scores are weighted averages of individual risk factors. When context is not provided:

- `blast_radius` and `context_complexity` scores will be null
- The overall score focuses on prompt-level risks
- Lower scores (0-25) indicate safer prompts
- Higher scores (76-100) require immediate attention

Always review the `recommendations` array for specific actions to take.
</Accordion>

<Accordion title="Custom weights">
Adjust weights based on your use case:

- **High-security applications**: Increase `data_sensitivity` weight to 0.3-0.4
- **Production systems**: Increase `blast_radius` weight when using the context endpoint
- **Content generation**: Increase `model_hallucination` weight to 0.25
- **Legal-sensitive domains**: Increase `legal_ip_risk` weight to 0.25

Ensure all weights sum to 1.0 for accurate scoring.
</Accordion>

<Accordion title="Handling errors">
Always check the `success` field before processing results:

```python
if result['success']:
    risk_score = result['overall_score']
    recommendations = result['recommendations']
else:
    error_message = result['error']
    # Handle error appropriately
```

Common errors include missing API keys, empty prompts, and invalid weight configurations.
</Accordion>
</AccordionGroup>

## Rate Limiting

This endpoint is subject to rate limiting. If you need to process high volumes of prompts, consider:

- Batching requests during off-peak hours
- Implementing exponential backoff for retries
- Contacting support for higher rate limits

<Warning>
Rate limit: 100 requests per minute per API key. Exceeding this limit results in HTTP 429 responses.
</Warning>
