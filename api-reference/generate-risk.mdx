---
title: "Generate Risk Score"
description: "Assess risk of an AI prompt without code context"
api: "POST /api/v1/generate-risk"
---

Generate a risk assessment based on prompt text only. This endpoint analyzes the prompt for data sensitivity and input clarity without requiring code context or dependency information.

## Use Cases

Use this endpoint when you need to:

- Quickly assess prompt safety before execution
- Evaluate prompts that don't involve code changes
- Screen for sensitive data in user inputs
- Validate prompt completeness and clarity

## Authentication

<ParamField header="Authorization" type="string" required>
Bearer token for API authentication. Format: `Bearer YOUR_API_KEY`
</ParamField>

## Request Body

<ParamField body="prompt" type="string" required>
The AI prompt or task description to assess for risk.

Example: `"Deploy the updated payment processing code to production"`
</ParamField>

<ParamField body="weights" type="object">
Optional custom weights for each risk factor. All weights should sum to 1.0. If not provided, default weights are used.

**Current default weights:**
- `data_sensitivity`: 0.20 (20%)
- `input_clarity`: 0.40 (40%)
- `blast_radius`: 0.40 (40%)

<Note>
Only the three risk factors listed above are currently active. Additional factors (context_complexity, legal_ip_risk, model_hallucination) are planned for future releases.
</Note>

<Expandable title="Weight Configuration">
  <ParamField body="weights.data_sensitivity" type="number" default="0.20">
  Weight for data sensitivity score (0-1). Currently active.
  </ParamField>

  
  <ParamField body="weights.input_clarity" type="number" default="0.40">
  Weight for input clarity score (0-1). Currently active.
  </ParamField>

  
  <ParamField body="weights.blast_radius" type="number" default="0.40">
  Weight for blast radius score (0-1). Currently active (requires context).
  </ParamField>

  
  <ParamField body="weights.context_complexity" type="number">
  Weight for context complexity score (0-1). Coming in future release.
  </ParamField>

  
  <ParamField body="weights.legal_ip_risk" type="number">
  Weight for legal/IP risk score (0-1). Coming in future release.
  </ParamField>

  
  <ParamField body="weights.model_hallucination" type="number">
  Weight for model hallucination risk score (0-1). Coming in future release.
  </ParamField>

</Expandable>

<Warning>
If some risk factors cannot be computed, the API automatically redistributes weights among available factors. The response includes both `weights` (actual used) and `original_weights` (your provided values).
</Warning>

</ParamField>

## Response

<ResponseField name="success" type="boolean" required>
Indicates whether the request was successful
</ResponseField>

<ResponseField name="timestamp" type="string" required>
ISO 8601 formatted timestamp of when the assessment was performed
</ResponseField>

<ResponseField name="overall_score" type="number" required>
Aggregate risk score from **0.0 to 1.0** (decimal), where higher values indicate greater risk. Example: 0.65 means high risk.
</ResponseField>

<ResponseField name="overall_risk_level" type="string" required>
Risk classification: `"minimal"`, `"low"`, `"medium"`, `"high"`, or `"critical"`

- `"minimal"`: score &lt; 0.2
- `"low"`: 0.2 ≤ score &lt; 0.4
- `"medium"`: 0.4 ≤ score &lt; 0.6
- `"high"`: 0.6 ≤ score &lt; 0.8
- `"critical"`: score &ge; 0.8
</ResponseField>

<ResponseField name="recommendations" type="array" required>
List of action recommendations based on risk level:
- `"SAFE - Minimal risk"`
- `"MONITOR - Low risk"`
- `"REVIEW_RECOMMENDED - Some risk factors detected"`
- `"REVIEW_REQUIRED - Significant risk factors present"`
- `"BLOCK - High risk detected"`
</ResponseField>

<ResponseField name="scores" type="object" required>
Individual risk factor scores (0.0-1.0). **Only includes successfully computed factors.**

<Expandable title="Risk Factor Scores">
  <ResponseField name="scores.data_sensitivity" type="number">
  Data sensitivity score (0.0-1.0). Included when computed successfully.
  </ResponseField>

  
  <ResponseField name="scores.input_clarity" type="number">
  Input clarity score (0.0-1.0). Included when computed successfully.
  </ResponseField>

  
  <ResponseField name="scores.blast_radius" type="number | omitted">
  Blast radius score (0.0-1.0). Omitted when no context provided or computation fails.
  </ResponseField>

</Expandable>

<Note>
Unavailable risk factors are not included in the scores object. Check `unavailable_parameters` for details on why factors were omitted.
</Note>

</ResponseField>

<ResponseField name="computations" type="object" required>
Detailed computation results for each risk factor including reasoning, evidence, and may include error messages for failed computations.
</ResponseField>

<ResponseField name="weights" type="object" required>
The **actual weights used** in calculation after any automatic redistribution. May differ from `original_weights` if some factors were unavailable.

<Note>
When factors are unavailable, weights are redistributed:
- 1 factor: gets 100%
- 2 factors: 65% and 35%
- 3 factors: 65%, 25%, and 10%
</Note>

</ResponseField>

<ResponseField name="original_weights" type="object" required>
The weights you provided (or defaults) before any redistribution. Use this to compare against `weights` to see if redistribution occurred.
</ResponseField>

<ResponseField name="prompt" type="string" required>
Echo of the original prompt that was assessed
</ResponseField>

<ResponseField name="current_file" type="string | null">
Always null for this endpoint (context not provided)
</ResponseField>

<ResponseField name="repo_full_name" type="string | null">
Always null for this endpoint (context not provided)
</ResponseField>

<ResponseField name="available_parameters" type="array">
List of parameter names that were successfully computed and included in the weighted score. Only present if some parameters were unavailable.
</ResponseField>

<ResponseField name="unavailable_parameters" type="object">
Map of parameter names to reason strings explaining why they couldn't be computed. Only present if some parameters were unavailable.

Example: `{"blast_radius": "current_file and dependency_graph required"}`
</ResponseField>

## Example Request

<RequestExample>
```bash cURL
curl -X POST 'https://api.orcho.ai/api/v1/generate-risk' \
  -H 'Authorization: Bearer YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "prompt": "Update the database schema to add a new user_email field and migrate existing data",
    "weights": {
      "data_sensitivity": 0.25,
      "input_clarity": 0.35,
      "blast_radius": 0.40
    }
  }'
```

```python Python
import requests

url = 'https://api.orcho.ai/api/v1/generate-risk'
headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
}

data = {
    'prompt': 'Update the database schema to add a new user_email field and migrate existing data',
    'weights': {
        'data_sensitivity': 0.25,
        'input_clarity': 0.35,
        'blast_radius': 0.40
    }
}

response = requests.post(url, headers=headers, json=data)
result = response.json()
```

```javascript JavaScript
const response = await fetch('https://api.orcho.ai/api/v1/generate-risk', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    prompt: 'Update the database schema to add a new user_email field and migrate existing data',
    weights: {
      data_sensitivity: 0.25,
      input_clarity: 0.35,
      blast_radius: 0.40
    }
  })
});

const result = await response.json();
```
</RequestExample>

## Example Response

<ResponseExample>
```json Success - Low Risk
{
  "success": true,
  "timestamp": "2025-01-08T15:30:00Z",
  "prompt": "Update the database schema to add a new user_email field and migrate existing data",
  "current_file": null,
  "overall_score": 0.2850,
  "overall_risk_level": "low",
  "recommendations": [
    "MONITOR - Low risk"
  ],
  "scores": {
    "data_sensitivity": 0.35,
    "input_clarity": 0.42
  },
  "computations": {
    "data_sensitivity": {
      "score": 0.35,
      "risk_level": "low",
      "reasoning": "Prompt mentions user data (email) which is PII",
      "evidence": ["user_email field", "existing data migration"]
    },
    "input_clarity": {
      "score": 0.42,
      "suggestions": [
        "Specify which database and table",
        "Clarify migration strategy",
        "Add rollback procedures"
      ]
    },
    "blast_radius": {
      "error": "current_file and dependency_graph required"
    }
  },
  "weights": {
    "data_sensitivity": 0.35,
    "input_clarity": 0.65
  },
  "original_weights": {
    "data_sensitivity": 0.20,
    "input_clarity": 0.40,
    "blast_radius": 0.40
  },
  "unavailable_parameters": {
    "blast_radius": "current_file and dependency_graph required"
  },
  "available_parameters": [
    "data_sensitivity",
    "input_clarity"
  ]
}
```

```json Success - High Risk
{
  "success": true,
  "timestamp": "2025-01-08T15:35:00Z",
  "prompt": "Call the payment API using key sk-1234567890abcdef",
  "current_file": null,
  "overall_score": 0.7620,
  "overall_risk_level": "high",
  "recommendations": [
    "REVIEW_REQUIRED - Significant risk factors present"
  ],
  "scores": {
    "data_sensitivity": 0.95,
    "input_clarity": 0.68
  },
  "computations": {
    "data_sensitivity": {
      "score": 0.95,
      "risk_level": "critical",
      "reasoning": "Prompt contains API key in plain text",
      "evidence": ["sk-1234567890abcdef"]
    },
    "input_clarity": {
      "score": 0.68,
      "suggestions": [
        "Remove API keys from prompt",
        "Use environment variables",
        "Specify exact endpoint"
      ]
    },
    "blast_radius": {
      "error": "current_file and dependency_graph required"
    }
  },
  "weights": {
    "data_sensitivity": 0.35,
    "input_clarity": 0.65
  },
  "original_weights": {
    "data_sensitivity": 0.20,
    "input_clarity": 0.40,
    "blast_radius": 0.40
  },
  "unavailable_parameters": {
    "blast_radius": "current_file and dependency_graph required"
  },
  "available_parameters": [
    "data_sensitivity",
    "input_clarity"
  ]
}
```

```json Error - Bad Request
{
  "success": false,
  "error": "Prompt is required and cannot be empty",
  "error_code": "HTTP_400",
  "details": {
    "status_code": 400
  }
}
```

```json Error - Unauthorized
{
  "success": false,
  "error": "Invalid API key",
  "error_code": "HTTP_401",
  "details": {
    "status_code": 401
  }
}
```
</ResponseExample>

## Best Practices

<AccordionGroup>

<Accordion title="When to use this endpoint">
This endpoint is ideal for quick risk assessments when you don't have code context available. Use it for:

- Screening user-submitted prompts
- Validating prompts before sending to AI models
- Quick safety checks in interactive applications
- Batch processing of prompt libraries

For more accurate assessments involving code changes, use the [Generate Risk with Context](/api-reference/generate-risk-with-context) endpoint instead.
</Accordion>

<Accordion title="Interpreting risk scores">
Risk scores are weighted averages of individual risk factors on a 0.0-1.0 scale:

- **&lt; 0.2**: Minimal risk - safe to proceed automatically
- **0.2 - 0.39**: Low risk - monitor
- **0.4 - 0.59**: Medium risk - review recommended
- **0.6 - 0.79**: High risk - review required
- **&ge; 0.8**: Critical risk - block execution

When context is not provided:
- `blast_radius` will be unavailable and excluded from scores
- Weights are automatically redistributed among available factors
- Check `available_parameters` and `unavailable_parameters` in the response

The overall score focuses on available risk factors. Always review the `recommendations` field for specific actions.
</Accordion>

<Accordion title="Custom weights">
Adjust weights based on your use case. Default weights are:
- `data_sensitivity`: 0.20 (20%)
- `input_clarity`: 0.40 (40%)
- `blast_radius`: 0.40 (40%)

Customize for specific scenarios:
- **High-security applications**: Increase `data_sensitivity` to 0.4-0.5
- **Production systems with context**: Increase `blast_radius` to 0.5
- **Unclear prompts common**: Increase `input_clarity` to 0.5

Ensure all weights sum to 1.0. If unavailable factors have weights, the API redistributes automatically:
- 1 available: Gets 100%
- 2 available: 65% and 35% (by original weight ranking)
- 3 available: 65%, 25%, and 10% (by original weight ranking)
</Accordion>

<Accordion title="Handling errors">
Always check the `success` field before processing results:

```python
if result['success']:
    risk_score = result['overall_score']
    recommendations = result['recommendations']
else:
    error_message = result['error']
    # Handle error appropriately
```

Common errors include missing API keys, empty prompts, and invalid weight configurations.
</Accordion>

</AccordionGroup>

## Rate Limiting

This endpoint is subject to rate limiting. If you need to process high volumes of prompts, consider:

- Batching requests during off-peak hours
- Implementing exponential backoff for retries
- Contacting support for higher rate limits

<Warning>
Rate limit: 100 requests per minute per API key. Exceeding this limit results in HTTP 429 responses.
</Warning>